import java.util.ArrayList;
import java.util.List;

public class BiodiversityDatabase {

    //Class level list (accessible by all methods)
    private ArrayList<Species> allSpecies = new ArrayList<>();

    //Constructor  where species objects are created & added
    public BiodiversityDatabase() {

        Mammals  m1 = new Mammals("Felis catus", "Cat", "Urban/Domestic", "Least Concern", "Worldwide (domesticated)", 15, "Viviparous", "Carnivore", "Rodent control", 4, "Fur", "Varies", "Walking/Running", "Crepuscular", "65 days", "Meowing/Purring");
        Mammals  m2 = new Mammals("Homo sapien", "Human", "Urban/Rural", "Least Concern", "Worldwide", 79, "Viviparous", "Omnivore", "Top-level consumer", 2, "Hair", "Varies", "Bipedal Walking", "Diurnal", "9 months(40 weeks)", "Speech");
        Mammals  m3 = new Mammals("Canis lupus familiaris", "Dog", "Urban/Domestic", "Least Concern", "Worldwide", 13, "Viviparous", "Omnivore", "Companion/Guardian", 4, "Fur", "Varies", "Walking/Running", "Diurnal", "63 days", "Barking");
        Mammals  m4 = new Mammals("Cetacea", "Whale", "Marine(Ocean)", "Varies by species", "All major oceans", 50, "Viviparous", "Carnivore", "Top marine predator", 0, "Smooth skin with blubber", "Grey/Blue/Grey-Black", "Swimming", "Diurnal", "10-12 months", "Vocalizations(songs, clicks,calls)");
        Mammals  m5 = new Mammals("Chiroptera", "Bat", "trees/caves", "Varies by species", "Worldwide(except polar regions)", 10, "Viviparous", "Insectivore", "Insect population control", 2, "Fur and Membranous wings", "Dark Brown/Black", "Flying", "Nocturnal", "3-6 months", "Echolocation & Vocal sounds");

        allSpecies.add(m1);
        allSpecies.add(m2);
        allSpecies.add(m3);
        allSpecies.add(m4);
        allSpecies.add(m5);

        //Objects of birds & fish
        Fish f1 = new Fish("Oreochromis niloticus", "Nile Tilapia", "Freshwater", "Least Concern", "Africa (mainly the Nile Basin)", 10, "Oviparous", "Omnivore", "Maintains freshwater food webs", 0, "Scales", "Silver/Grey", "Swimming", "Dorsal, Caudal, Pectoral", "Cycloid", true);
        Fish f2 = new Fish("Amphiprion ocellaris", "Clownfish", "Marine (Coral reefs)", "Least Concern", "Indo-Pacific Ocean", 6, "Oviparous", "Omnivore", "Symbiotic partner to sea anemones", 0, "Scales", "Orange with White Stripes", "Swimming", "Dorsal, Caudal, Pectoral", "Ctenoid", true);
        Fish f3 = new Fish("Salmo salar", "Atlantic Salmon", "Freshwater/Marine (Anadromous)", "Least Concern", "North Atlantic Ocean & Rivers", 13, "Oviparous", "Carnivore", "Predator; nutrient transporter between ocean and rivers", 0, "Scales", "Silver/Blue", "Swimming", "Adipose, Caudal, Dorsal", "Cycloid", true);
        Fish f4 = new Fish("Carcharodon carcharias", "Great White Shark", "Marine (Open ocean)", "Vulnerable", "Worldwide (temperate/coastal waters)", 70, "Ovoviviparous", "Carnivore", "Apex predator controlling marine populations", 0, "Dermal Denticles", "Grey/White", "Swimming", "Pectoral, Caudal, Dorsal", "Placoid", false);
        Fish f5 = new Fish("Thunnus albacares", "Yellowfin Tuna", "Marine (Open ocean)", "Near Threatened", "Tropical & Subtropical Oceans", 8, "Oviparous", "Carnivore", "Fast predator; maintains pelagic ecosystem balance", 0, "Scales", "Metallic Blue/Yellow", "Swimming (Fast pelagic)", "Dorsal, Caudal, Pectoral", "Cycloid", true);

        allSpecies.add(f1);
        allSpecies.add(f2);
        allSpecies.add(f3);
        allSpecies.add(f4);
        allSpecies.add(f5);


        //Objects of floweringPlant & NonfloweringPlant

        System.out.println("Total species added: " + allSpecies.size());
    }

    //Filtering/Search methods
    
    //Returns full list
    public List<String> getAllSpecies() {
        return allSpecies.stream()
                .map(Species::getCommonName) //or Species::toString if modified
                .toList();
    }

    //Search by name
    public List<Species> searchByName(String name) {
        List<Species> results = new ArrayList<>();

        for (Species s : allSpecies) {
            if (s.getCommonName().toLowerCase().contains(name.toLowerCase()) ||
                    s.getScientificName().toLowerCase().contains(name.toLowerCase())) {

                results.add(s);
            }
        }
        return results;
    }

    //Filter by main category (Animal / Plant)
    public List<Species> filterByCategory(String category) {
        List<Species> results = new ArrayList<>();

        for (Species s : allSpecies) {

            if (category.equalsIgnoreCase("Animal") && s instanceof Animal) {
                results.add(s);
            }
            else if (category.equalsIgnoreCase("Plant") && s instanceof Plant) {
                results.add(s);
            }
        }
        return results;
    }

    //Filter by subgroup (Mammal/Bird/Fish/Flowering/NonFlowering)
    public List<Species> filterBySubGroup(String subgroup) {
        List<Species> results = new ArrayList<>();

        for (Species s : allSpecies) {

            if (subgroup.equalsIgnoreCase("Mammal") && s instanceof Mammals) {
                results.add(s);
            }
            else if (subgroup.equalsIgnoreCase("Bird") && s instanceof Birds) {
                results.add(s);
            }
            else if (subgroup.equalsIgnoreCase("Fish") && s instanceof Fish) {
                results.add(s);
            }
            else if (subgroup.equalsIgnoreCase("Flowering") && s instanceof Flowering) {
                results.add(s);
            }
            else if (subgroup.equalsIgnoreCase("NonFlowering") && s instanceof NonFlowering) {
                results.add(s);
            }
        }
        return results;
    }


    //Paste methods per each attribute here!!!


    // Main method
    public static void main(String[] args) {
        BiodiversityDatabase db = new BiodiversityDatabase();
        System.out.println(db.getAllSpecies());


        System.out.println("Animals: " + db.filterByCategory("Animal").size());
        System.out.println("Plants: " + db.filterByCategory("Plant").size());

        System.out.println("Mammals: " + db.filterBySubGroup("Mammal").size());
        //System.out.println("Birds: " + db.filterBySubGroup("Bird").size());
        //System.out.println("Fish: " + db.filterBySubGroup("Fish").size());
        //System.out.println("Fish: " + db.filterBySubGroup("Flowering").size());
        //System.out.println("Fish: " + db.filterBySubGroup("NonFlowering").size());
       
        
    }
}

